name: Example Workflow

on:
  issues:
    types: [opened]

jobs:
  example-job:
    runs-on: ubuntu-latest
    steps:
      - name: Get Issue Events
        id: get_events
        run: |
          response=$(curl -L \
            -H "Authorization: token ${{ secrets.MY_PAT }}" \
            -H "Accept: application/vnd.github.v3+json" \
            https://api.github.com/repos/${{ github.repository }}/issues/${{ github.event.issue.number }}/events)

          echo "Response: $response"
          
          project_id=$(echo "$response" | jq -r '.[] | select(.event == "added_to_project") | .project_id')

          if [ -z "$project_id" ]; then
            echo "No project ID found."
          else
            echo "Project ID: $project_id"
            echo "PROJECT_ID=$project_id" >> $GITHUB_ENV
          fi
